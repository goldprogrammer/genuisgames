<!DOCTYPE html>
<html>
<head><meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<title>Learning to estimate</title>
</head>
<body><input type="range" min="0" max="200" value="100" class="slider" id="slider">
	<div id="starttext">Welcome!  In this website, you will be learning to estimate semi-random processes.  To do this, make sure your sound is enabled.  Your goal is to move the handle on the slider to make the number of clicks per second maximized. Do this as quickly as possible and when you feel that you have suceeded, click Done!  when you want to start, click the StartSound button. </div>
<style type="text/css">
	#starttext{
		position:fixed;
		left:25%;
		width: 50%;
		top:20%;
		height:40%;
	}
	#slider{
		position:fixed;
		-webkit-appearance: none;
		width:50%;
		height:100px;
		background-color: blue;
		left:25%;
		top:87%;
	}
	#slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    border-radius:50px;
    width: 100px;
    height: 100px;
    background: grey;
}button{
	font-size: 28pt;
	width:30%;
	height:10%;
}#done{position:fixed;
	left:70%;
}
</style>
<button onclick="w = setInterval(formula,1); run()"> StartSound</button>
<button id = "done" onclick="stop()"> Done!</button>
<script>

	var a = Math.floor(Math.random()*400)
	var w;
	var ins;
var val;
var i=0;
var rd = 0;
var x = 0;
var blip = new Audio('blip.mp3');
	var tensec=0;
	var sec=0;
var min=0;
var z=2;
var time="";
var y;
var name;
var r=[];
var s;
var u = 1
var p=0;
var ntime;
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
}
}if(parseInt(getCookie("avg"))>50){
	var qs=parseInt(getCookie("max"))-2.5
	var q=parseInt(getCookie("dr"))+.1
}else if(parseInt(getCookie("avg"))<=50){
	var qs=parseInt(getCookie("max"))+2.5
	var q=parseInt(getCookie("dr"))-.1
}else{
	var q = .97;
	var qs = 100;
}
function runclock(){
		if(z!==1){
			tensec++
		}
			if(tensec>60){tensec=00
				sec++
			}time = String(sec)+"."+String(tensec)
			z++
		};
	function run() {
	 y=setInterval(runclock, (16+(2/3)))
	 s=setInterval(record, 500)
	};
	function formula(Î») {
		x = Math.abs(document.getElementById("slider").value);
		rd = Math.ceil(Math.random()*(qs-(120*(Math.pow(q, Math.abs(a-x))))))
		if(rd == 1){i++
			console.log(i)
			blip.play();
		}
	}function record(){
		r.push(String(Math.abs(a-x)))
	}function average(){
		for (var i = r.length - 1; i >= 0; i--) {
			parseFloat(r[i])+p
			p=parseFloat(r[i])+p
		}return p/r.length;
	}
	function stop(){
		clearInterval(y);
		clearInterval(w);
		clearInterval(s);
		document.cookie='dr='+String(q)+';expires=Wed, 18 Dec 2023 12:00:00 GMT';
		document.cookie='max='+String(qs)+';expires=Wed, 18 Dec 2023 12:00:00 GMT';
		document.cookie='avg='+String(average())+';expires=Wed, 18 Dec 2023 12:00:00 GMT';
		alert("Nice Job!  This page will redirect you to the next step.")
		location.reload()
	}
</script>
</body>
</html>
